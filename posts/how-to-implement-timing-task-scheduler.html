<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">Light Up The World</title><link rel="preload" href="/_next/static/css/38bd5d5cff1a97ec.css" as="style"/><link rel="preload" href="/_next/static/css/67a8467bbb0bf2f3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/38bd5d5cff1a97ec.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/css/67a8467bbb0bf2f3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-0d0518cf5dc92fa8.js" defer=""></script><script src="/_next/static/chunks/framework-6c7418e6436abbda.js" defer=""></script><script src="/_next/static/chunks/main-337427424dcda4f8.js" defer=""></script><script src="/_next/static/chunks/pages/_app-abba8f27a92acb47.js" defer=""></script><script src="/_next/static/chunks/8-31eaf657f5c19175.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-621cfbb84ba78acf.js" defer=""></script><script src="/_next/static/DQUV_1P5d5M_T4EvFA1s5/_buildManifest.js" defer=""></script><script src="/_next/static/DQUV_1P5d5M_T4EvFA1s5/_ssgManifest.js" defer=""></script></head><body class="antialiased"><div id="__next"><div class="Post_container__ictJu"><nav class="Nav_nav__o8sSc"><div class="Nav_navContainer__KuO9f"><a class="Nav_navLogo__aczrM" href="/">Light Ning</a><div class="Nav_navLinks__sb_3K"><a class="Nav_navLink__z2PDT " href="/">首页</a><a class="Nav_navLink__z2PDT " href="/about">关于</a></div></div></nav><main class="Post_main__X4Tic"><article class="Post_post__1KH4p"><h1 class="Post_title__pen_7">定时任务调度器的设计</h1><time class="Post_date__YGL_Q">2013-12-31</time><div class="Post_postTags__df1Jm"><span class="Post_postTag__j37er">系统设计</span></div><div class="prose max-w-none"><p>此篇介绍一下如何简单实现定时任务调度器。</p>
<p>实现定时任务调度器，最关键的如何对任务的时间进行判断和调度。</p>
<h2>顺序遍历</h2>
<p>对所有任务进行顺序遍历，进行时间判断和调度，虽然简单，但明显不是时间最优的方法。</p>
<h2>优先级队列</h2>
<p>使用时间作为优先级，只需要查询时间最接近当前时间的队列数据即可。
优先级队列一般使用堆结构进行实现，时间复杂度LogN。</p>
<h2>时间轮</h2>
<p>时间轮是一个环形队列，按照时间的单位进行区分。比如每个单位是1s，然后一个单位里挂载一个链表，用来存储定时任务。
如果时间超过了一个环形队列的长度，那么可以使用多级时间轮进行优化。比如第一层的走一圈时，第二层的走一格，有点类似于水表的那种表示。
最终时间复杂度为O(1)。</p>
</div></article><div class="Post_postNavigation__TSrfz"><a class="Post_navLink__iyGDb" href="/posts/how-to-do-1on1-well">← <!-- -->1on1沟通应该怎么做</a><a class="Post_navLink__iyGDb Post_nextLink__THXHn" href="/posts/redis-key-ttl-expire">Redis Key的过期<!-- --> →</a></div></main><footer class="footer_footer__mqdak"><p>© <!-- -->2025<!-- --> <!-- -->Light Ning<!-- --> All rights reserved.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"summary":null,"tags":["系统设计"],"id":"how-to-implement-timing-task-scheduler","contentHtml":"\u003cp\u003e此篇介绍一下如何简单实现定时任务调度器。\u003c/p\u003e\n\u003cp\u003e实现定时任务调度器，最关键的如何对任务的时间进行判断和调度。\u003c/p\u003e\n\u003ch2\u003e顺序遍历\u003c/h2\u003e\n\u003cp\u003e对所有任务进行顺序遍历，进行时间判断和调度，虽然简单，但明显不是时间最优的方法。\u003c/p\u003e\n\u003ch2\u003e优先级队列\u003c/h2\u003e\n\u003cp\u003e使用时间作为优先级，只需要查询时间最接近当前时间的队列数据即可。\n优先级队列一般使用堆结构进行实现，时间复杂度LogN。\u003c/p\u003e\n\u003ch2\u003e时间轮\u003c/h2\u003e\n\u003cp\u003e时间轮是一个环形队列，按照时间的单位进行区分。比如每个单位是1s，然后一个单位里挂载一个链表，用来存储定时任务。\n如果时间超过了一个环形队列的长度，那么可以使用多级时间轮进行优化。比如第一层的走一圈时，第二层的走一格，有点类似于水表的那种表示。\n最终时间复杂度为O(1)。\u003c/p\u003e\n","date":"2013-12-31T10:00:00.000Z","title":"定时任务调度器的设计","published":true,"hideInList":false,"feature":null},"prevPost":{"summary":null,"tags":["工作"],"id":"how-to-do-1on1-well","title":"1on1沟通应该怎么做","date":"2014-01-01T10:00:00.000Z","published":true,"hideInList":false,"feature":null,"isTop":false},"nextPost":{"summary":null,"tags":["Redis"],"id":"redis-key-ttl-expire","title":"Redis Key的过期","date":"2013-10-21T10:00:00.000Z","published":true,"hideInList":false,"feature":null,"isTop":false}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"how-to-implement-timing-task-scheduler"},"buildId":"DQUV_1P5d5M_T4EvFA1s5","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>