<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">Light Up The World</title><link rel="preload" href="/_next/static/css/4e5cda5fda82b963.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4e5cda5fda82b963.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-7c47d0879e3fabaa.js" defer=""></script><script src="/_next/static/chunks/main-eabf4e641ff2595a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1c3b0aeaafcae3ac.js" defer=""></script><script src="/_next/static/chunks/493-7bce3a15b2a5d2a7.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-8c52a5d151f24266.js" defer=""></script><script src="/_next/static/NWQ-wIXtvmZENL-7ItN5S/_buildManifest.js" defer=""></script><script src="/_next/static/NWQ-wIXtvmZENL-7ItN5S/_ssgManifest.js" defer=""></script></head><body class="antialiased"><div id="__next"><div class="min-h-screen flex flex-col"><nav class="bg-gray-50 text-gray-700 py-4 shadow-md"><div class="flex justify-between items-center max-w-7xl mx-auto px-4"><a class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-900 bg-clip-text text-transparent" href="/">Light Ning</a><div class="flex gap-6"><a class="text-gray-700 font-medium transition-all duration-200 px-2 py-1 rounded hover:bg-gray-100 hover:text-blue-600" href="/">首页</a><a class="text-gray-700 font-medium transition-all duration-200 px-2 py-1 rounded hover:bg-gray-100 hover:text-blue-600" href="/about">关于</a></div></div></nav><main class="flex-1 py-8 max-w-5xl mx-auto w-full"><article class="bg-white rounded-lg p-8 shadow-sm"><h1 class="text-3xl font-bold text-gray-700 mb-2 text-center">技术系统容灾方案</h1><time class="block text-sm text-gray-600 mb-8 text-center">2015-10-02</time><div class="prose max-w-none text-gray-700 markdown"><h2>单活（即主备模式，Active-Standby）</h2>
<p>传统的单活是一主一备，主负责业务处理，备只负责数据同步，备只有在主发生故障时才会启用，并不会承担线上流量。</p>
<h2>双活（Active-Active）</h2>
<ol>
<li>主和备都有业务流量，两者同时对外提供服务，并且可以调节流量分担的比例（可以根据用户ID、地域或者其它业务属性来决定怎么分担流量）。</li>
<li>要实现业务双活，需要保证包括基础设施(如存储)、中间件(如MQ)、网络层、应用层等都能实现双活。</li>
<li>双活又分为同城双活（同城双中心）、异地双活。</li>
</ol>
<h2>多活</h2>
<p>因为双活需要同步复制，所以双活的两个中心一般在同一个城市（或附近）进行搭建。如果距离太远，同步复制就会出现比较大的延迟，导致性能下降。</p>
<h2>备份方式</h2>
<ol>
<li>热备：数据实时备份</li>
<li>冷备：数据周期性定时备份</li>
</ol>
<h2>两地三中心</h2>
<ol>
<li>两地三中心：是指“同城双中心”加上“异地灾备中心”的一种商用容灾备份解决方案，即在双活的基础上增加了一个异地备份的功能。</li>
<li>其中“两地”是指同城、异地，“三中心”是指生产中心、同城容灾中心、异地容灾中心。</li>
<li>同城：在同城或相近区域内（≤ 200km）建立两个数据中心。同城灾难备份一般用于防范火灾、建筑物破坏、供电故障、计算机系统及人为破坏引起的灾难。</li>
<li>异地：主备中心之间的距离较远（＞ 200km) ， 因此一般采用异步镜像，会有少量的数据丢失。异地灾难备份不仅可以防范火灾、建筑物破坏等可能遇到的风险隐患，还能够防范战争、地震、水灾等风险。</li>
</ol>
<h2>网络</h2>
<ol>
<li>数据中心的互联网络一般采用光纤。对于大于25km的光纤链路，还需要增加DWDM波分设备，用于提高带宽降低时延。DWDM对于数据传输的时延起着关键的作用。</li>
<li>双活距离一直都不是问题，主要还是看网络时延和误码率，以及应用对RTT时延要求和容忍度。</li>
</ol>
</div><div class="flex flex-wrap gap-2 mt-8"><span class="bg-gray-100 text-gray-700 text-sm px-2 py-1 rounded-full">系统设计</span></div></article><div class="mt-12 border-t border-gray-200 pt-8 flex justify-between"><div class="text-gray-600 text-sm flex flex-col items-start"><span class="text-sm text-gray-500">上一篇</span><a class="text-black hover:bg-gray-200 text-base mt-1 font-bold" href="/posts/how-to-design-the-tinyurl-system">如何设计一个短网址服务</a></div><div class="ml-auto text-gray-600 text-sm flex flex-col items-end"><span class="text-sm text-gray-500">下一篇</span><a class="text-black hover:bg-gray-200 text-base mt-1 font-bold" href="/posts/system-monitor-things">关于系统监控的一些事</a></div></div></main><footer class="text-center bg-gray-50 text-gray-700 py-4 shadow-md mt-8"><p>Copyright © <!-- -->2025<!-- --> <!-- -->Light Ning<!-- -->. All rights reserved.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"summary":null,"tags":["系统设计"],"id":"technical-system-disaster-recovery-plan","contentHtml":"\u003ch2\u003e单活（即主备模式，Active-Standby）\u003c/h2\u003e\n\u003cp\u003e传统的单活是一主一备，主负责业务处理，备只负责数据同步，备只有在主发生故障时才会启用，并不会承担线上流量。\u003c/p\u003e\n\u003ch2\u003e双活（Active-Active）\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e主和备都有业务流量，两者同时对外提供服务，并且可以调节流量分担的比例（可以根据用户ID、地域或者其它业务属性来决定怎么分担流量）。\u003c/li\u003e\n\u003cli\u003e要实现业务双活，需要保证包括基础设施(如存储)、中间件(如MQ)、网络层、应用层等都能实现双活。\u003c/li\u003e\n\u003cli\u003e双活又分为同城双活（同城双中心）、异地双活。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e多活\u003c/h2\u003e\n\u003cp\u003e因为双活需要同步复制，所以双活的两个中心一般在同一个城市（或附近）进行搭建。如果距离太远，同步复制就会出现比较大的延迟，导致性能下降。\u003c/p\u003e\n\u003ch2\u003e备份方式\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e热备：数据实时备份\u003c/li\u003e\n\u003cli\u003e冷备：数据周期性定时备份\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e两地三中心\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e两地三中心：是指“同城双中心”加上“异地灾备中心”的一种商用容灾备份解决方案，即在双活的基础上增加了一个异地备份的功能。\u003c/li\u003e\n\u003cli\u003e其中“两地”是指同城、异地，“三中心”是指生产中心、同城容灾中心、异地容灾中心。\u003c/li\u003e\n\u003cli\u003e同城：在同城或相近区域内（≤ 200km）建立两个数据中心。同城灾难备份一般用于防范火灾、建筑物破坏、供电故障、计算机系统及人为破坏引起的灾难。\u003c/li\u003e\n\u003cli\u003e异地：主备中心之间的距离较远（＞ 200km) ， 因此一般采用异步镜像，会有少量的数据丢失。异地灾难备份不仅可以防范火灾、建筑物破坏等可能遇到的风险隐患，还能够防范战争、地震、水灾等风险。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e网络\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e数据中心的互联网络一般采用光纤。对于大于25km的光纤链路，还需要增加DWDM波分设备，用于提高带宽降低时延。DWDM对于数据传输的时延起着关键的作用。\u003c/li\u003e\n\u003cli\u003e双活距离一直都不是问题，主要还是看网络时延和误码率，以及应用对RTT时延要求和容忍度。\u003c/li\u003e\n\u003c/ol\u003e\n","date":"2015-10-02","title":"技术系统容灾方案"},"prevPost":{"summary":null,"tags":["系统设计"],"id":"how-to-design-the-tinyurl-system","title":"如何设计一个短网址服务","date":"2015-10-03"},"nextPost":{"summary":null,"tags":["系统设计","Linux"],"id":"system-monitor-things","title":"关于系统监控的一些事","date":"2015-09-11"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"technical-system-disaster-recovery-plan"},"buildId":"NWQ-wIXtvmZENL-7ItN5S","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>