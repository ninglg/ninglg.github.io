<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">Light Up The World</title><link rel="preload" href="/_next/static/css/c6cf52e305c0a82d.css" as="style"/><link rel="preload" href="/_next/static/css/a4c89924d335e8ba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c6cf52e305c0a82d.css" data-n-g=""/><link rel="stylesheet" href="/_next/static/css/a4c89924d335e8ba.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-8cac0b4b405cede1.js" defer=""></script><script src="/_next/static/chunks/framework-7c47d0879e3fabaa.js" defer=""></script><script src="/_next/static/chunks/main-eabf4e641ff2595a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-1c3b0aeaafcae3ac.js" defer=""></script><script src="/_next/static/chunks/255-556050becd2e6a51.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-cf601882bd9aa338.js" defer=""></script><script src="/_next/static/23nJwR-weo8RGkMPuwSRu/_buildManifest.js" defer=""></script><script src="/_next/static/23nJwR-weo8RGkMPuwSRu/_ssgManifest.js" defer=""></script></head><body class="antialiased"><div id="__next"><div class="Post_container__ictJu"><nav class="Nav_nav__o8sSc"><div class="Nav_navContainer__KuO9f"><a class="Nav_navLogo__aczrM" href="/">Light Ning</a><div class="Nav_navLinks__sb_3K"><a class="Nav_navLink__z2PDT " href="/">首页</a><a class="Nav_navLink__z2PDT " href="/about">关于</a></div></div></nav><main class="Post_main__X4Tic"><article class="Post_post__1KH4p"><h1 class="Post_title__pen_7">技术系统容灾方案</h1><time class="Post_date__YGL_Q">2015-10-02</time><div class="Post_content__aWM2C"><h2>单活（即主备模式，Active-Standby）</h2>
<p>传统的单活是一主一备，主负责业务处理，备只负责数据同步，备只有在主发生故障时才会启用，并不会承担线上流量。</p>
<h2>双活（Active-Active）</h2>
<ol>
<li>主和备都有业务流量，两者同时对外提供服务，并且可以调节流量分担的比例（可以根据用户ID、地域或者其它业务属性来决定怎么分担流量）。</li>
<li>要实现业务双活，需要保证包括基础设施(如存储)、中间件(如MQ)、网络层、应用层等都能实现双活。</li>
<li>双活又分为同城双活（同城双中心）、异地双活。</li>
</ol>
<h2>多活</h2>
<p>因为双活需要同步复制，所以双活的两个中心一般在同一个城市（或附近）进行搭建。如果距离太远，同步复制就会出现比较大的延迟，导致性能下降。</p>
<h2>备份方式</h2>
<ol>
<li>热备：数据实时备份</li>
<li>冷备：数据周期性定时备份</li>
</ol>
<h2>两地三中心</h2>
<ol>
<li>两地三中心：是指“同城双中心”加上“异地灾备中心”的一种商用容灾备份解决方案，即在双活的基础上增加了一个异地备份的功能。</li>
<li>其中“两地”是指同城、异地，“三中心”是指生产中心、同城容灾中心、异地容灾中心。</li>
<li>同城：在同城或相近区域内（≤ 200km）建立两个数据中心。同城灾难备份一般用于防范火灾、建筑物破坏、供电故障、计算机系统及人为破坏引起的灾难。</li>
<li>异地：主备中心之间的距离较远（＞ 200km) ， 因此一般采用异步镜像，会有少量的数据丢失。异地灾难备份不仅可以防范火灾、建筑物破坏等可能遇到的风险隐患，还能够防范战争、地震、水灾等风险。</li>
</ol>
<h2>网络</h2>
<ol>
<li>数据中心的互联网络一般采用光纤。对于大于25km的光纤链路，还需要增加DWDM波分设备，用于提高带宽降低时延。DWDM对于数据传输的时延起着关键的作用。</li>
<li>双活距离一直都不是问题，主要还是看网络时延和误码率，以及应用对RTT时延要求和容忍度。</li>
</ol>
</div><div class="Post_postTags__df1Jm"><span class="Post_postTag__j37er">系统设计</span></div></article><div class="Post_postNavigation__TSrfz"><a class="Post_navLink__iyGDb" href="/posts/how-to-design-the-tinyurl-system">← <!-- -->如何设计一个短网址服务</a><a class="Post_navLink__iyGDb Post_nextLink__THXHn" href="/posts/system-monitor-things">关于系统监控的一些事<!-- --> →</a></div></main><footer class="footer_footer__mqdak"><p>Copyright © <!-- -->2025<!-- --> <!-- -->Light Ning<!-- -->. All rights reserved.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"summary":null,"tags":["系统设计"],"id":"technical-system-disaster-recovery-plan","contentHtml":"\u003ch2\u003e单活（即主备模式，Active-Standby）\u003c/h2\u003e\n\u003cp\u003e传统的单活是一主一备，主负责业务处理，备只负责数据同步，备只有在主发生故障时才会启用，并不会承担线上流量。\u003c/p\u003e\n\u003ch2\u003e双活（Active-Active）\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e主和备都有业务流量，两者同时对外提供服务，并且可以调节流量分担的比例（可以根据用户ID、地域或者其它业务属性来决定怎么分担流量）。\u003c/li\u003e\n\u003cli\u003e要实现业务双活，需要保证包括基础设施(如存储)、中间件(如MQ)、网络层、应用层等都能实现双活。\u003c/li\u003e\n\u003cli\u003e双活又分为同城双活（同城双中心）、异地双活。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e多活\u003c/h2\u003e\n\u003cp\u003e因为双活需要同步复制，所以双活的两个中心一般在同一个城市（或附近）进行搭建。如果距离太远，同步复制就会出现比较大的延迟，导致性能下降。\u003c/p\u003e\n\u003ch2\u003e备份方式\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e热备：数据实时备份\u003c/li\u003e\n\u003cli\u003e冷备：数据周期性定时备份\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e两地三中心\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e两地三中心：是指“同城双中心”加上“异地灾备中心”的一种商用容灾备份解决方案，即在双活的基础上增加了一个异地备份的功能。\u003c/li\u003e\n\u003cli\u003e其中“两地”是指同城、异地，“三中心”是指生产中心、同城容灾中心、异地容灾中心。\u003c/li\u003e\n\u003cli\u003e同城：在同城或相近区域内（≤ 200km）建立两个数据中心。同城灾难备份一般用于防范火灾、建筑物破坏、供电故障、计算机系统及人为破坏引起的灾难。\u003c/li\u003e\n\u003cli\u003e异地：主备中心之间的距离较远（＞ 200km) ， 因此一般采用异步镜像，会有少量的数据丢失。异地灾难备份不仅可以防范火灾、建筑物破坏等可能遇到的风险隐患，还能够防范战争、地震、水灾等风险。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e网络\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e数据中心的互联网络一般采用光纤。对于大于25km的光纤链路，还需要增加DWDM波分设备，用于提高带宽降低时延。DWDM对于数据传输的时延起着关键的作用。\u003c/li\u003e\n\u003cli\u003e双活距离一直都不是问题，主要还是看网络时延和误码率，以及应用对RTT时延要求和容忍度。\u003c/li\u003e\n\u003c/ol\u003e\n","date":"2015-10-02T00:00:00.000Z","title":"技术系统容灾方案"},"prevPost":{"summary":null,"tags":["系统设计"],"id":"how-to-design-the-tinyurl-system","title":"如何设计一个短网址服务","date":"2015-10-03T00:00:00.000Z"},"nextPost":{"summary":null,"tags":["系统设计","Linux"],"id":"system-monitor-things","title":"关于系统监控的一些事","date":"2015-09-11T00:00:00.000Z"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"technical-system-disaster-recovery-plan"},"buildId":"23nJwR-weo8RGkMPuwSRu","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>