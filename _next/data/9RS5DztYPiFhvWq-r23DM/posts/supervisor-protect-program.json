{"pageProps":{"post":{"summary":null,"tags":["Linux"],"id":"supervisor-protect-program","contentHtml":"<h2>官网</h2>\n<p><a href=\"http://supervisord.org/\">supervisor</a></p>\n<h2>简介</h2>\n<p>supervisor 是一个使用Python开发的守护程序，它可以对单台机器上的程序进行启停管理、自动重启等。</p>\n<h2>安装启动</h2>\n<blockquote>\n<p>brew install supervisor</p>\n</blockquote>\n<p>安装后会生成两个可执行程序：</p>\n<ol>\n<li>supervisortd：守护进程服务</li>\n<li>supervisorctl：客户端，用于命令行交互</li>\n</ol>\n<h2>启动</h2>\n<p>放到后台一直启动：</p>\n<blockquote>\n<p>brew services start supervisor\n根据配置文件单次启动：\nsupervisord -c /usr/local/etc/supervisord.ini</p>\n</blockquote>\n<h2>使用示例</h2>\n<p>例如使用Supervisor守护进程来配置Redis：</p>\n<ol>\n<li>配置守护进程文件，在/etc/supervisord.d/ 下新建 redis.conf</li>\n</ol>\n<pre><code>vi /etc/supervisord.d/redis.conf\n</code></pre>\n<ol start=\"2\">\n<li>添加以下内容</li>\n</ol>\n<pre><code># 新建一个应用并设置一个名称，这里设置为 redis\n[program:redis]\n# 设置命令在指定的目录内执行\ndirectory=/usr/local/redis/bin\n# 这里为您要管理的项目的启动命令\ncommand=/usr/local/redis/bin/redis-server\n# 以哪个用户来运行该进程\nuser=root\n# supervisor 启动时自动该应用\nautostart=true\n# 进程退出后自动重启进程\nautorestart=true\n# 进程持续运行多久才认为是启动成功\nstartsecs=1\n# 重试次数\nstartretries=3\n# stderr日志输出位置\nstderr_logfile=/soft/logs/redis/stderr.log\n# stdout 日志输出位置\nstdout_logfile=/soft/logs/redis/stdout.log\n</code></pre>\n<ol start=\"3\">\n<li>新建日志文件夹</li>\n</ol>\n<pre><code>mkdir -p /soft/log/redis/\n</code></pre>\n<ol start=\"4\">\n<li>更新重启所有Supervisor配置的任务</li>\n</ol>\n<pre><code>supervisorctl  reload\n</code></pre>\n<ol start=\"5\">\n<li>只启动更新过配置的任务</li>\n</ol>\n<pre><code>supervisorctl update [job_name]\n</code></pre>\n<ol start=\"6\">\n<li>单独停止或启动某个任务</li>\n</ol>\n<pre><code>supervisorctl [start | stop | restart | status ] [job_name]\n</code></pre>\n<ol start=\"7\">\n<li>查看Supervisor状态，redis是否被添加</li>\n</ol>\n<pre><code>supervisorctl  status\n</code></pre>\n","date":"2010-12-15T00:00:00.000Z","title":"使用supervisor来守护运行的程序"},"prevPost":{"summary":null,"tags":["网络"],"id":"mac-address-learning-intro","title":"Mac地址学习的概念","date":"2011-01-03T00:00:00.000Z"},"nextPost":{"summary":null,"tags":["阅读"],"id":"rich-dad-poor-dad-reading","title":"《富爸爸穷爸爸》阅读笔记","date":"2010-10-25T00:00:00.000Z"}},"__N_SSG":true}