{"pageProps":{"post":{"summary":null,"tags":["Linux"],"id":"makefile-intro","contentHtml":"<p>Make 是一个构建自动化工具，此命令会在当前目录下寻找 Makefile 文件。\n如果文件存在，则会依据 Makefile 文件中的构建规则去完成构建。</p>\n<h1>规则</h1>\n<p>Makefile 由多条规则组成，每条规则都以一个 target（目标）开头，后跟一个 : 冒号，冒号后是这一个目标的 prerequisites（前置条件） ，紧接着新的一行，必须以一个 tab 作为开头，后面跟着完成目标所需要执行的一系列 command（命令）。</p>\n<pre><code class=\"language-shell\">[target] ... : [prerequisites] ...\n&#x3C;tab>[command] ... ...\n</code></pre>\n<h1>描述</h1>\n<ol>\n<li>target：一个目标代表一条规则，可以是一个或多个文件名，也可以是某个操作的名字（标签），称为伪目标（phony）。</li>\n<li>prerequisites：前置条件，这一项是可选参数。通常是多个文件名、伪目标。它的作用是影响 target 是否需要重新构建的标准。如果前置条件不存在或有过更新（文件的最后一次修改时间）则认为 target 需要重新构建。</li>\n<li>command：构建这一个 target 的具体命令集。</li>\n</ol>\n<h1>示例</h1>\n<pre><code class=\"language-shell\">.PHONY: build clean tool lint help\n\nall: build\n\nbuild:\n        go build -v .\n\ntool:\n        go tool vet . |&#x26; grep -v vendor; true\n        gofmt -w .\n\nlint:\n        golint ./...\n\nclean:\n        rm -rf output\n        go clean -i .\n\nhelp:\n        @echo \"make: compile packages and dependencies\"\n        @echo \"make tool: run specified go tool\"\n        @echo \"make lint: golint ./...\"\n        @echo \"make clean: remove objetct files and other useless files\"\n</code></pre>\n<h1>解释</h1>\n<ol>\n<li>PHONY的作用是声明 build / clean / tool / lint / help 为伪目标。如果被声明为伪目标，在执行对应的命令时，make 就不会去检查是否存在 build / clean / tool / lint / help 其对应的结果文件，而是每次都会运行标签对应的命令。如果不声明，那么恰好存在对应的结果文件时，make 就会认为文件已存在，没有重新构建的必要了。</li>\n<li>其它命令</li>\n</ol>\n<pre><code class=\"language-txt\">make: make 就是 make all\nmake build: 编译当前项目的包和依赖项\nmake tool: 运行指定的 Go 工具集\nmake lint: golint 检查一下\nmake clean: 删除对象文件和缓存文件\nmake help: help\n</code></pre>\n<h1>回声</h1>\n<ol>\n<li>make 默认会打印每条命令，再执行。</li>\n<li>如果不想打印命令，可以在对应命令前加上 @，可指定该命令不被打印到标准输出上。</li>\n</ol>\n","date":"2014-09-17T00:00:00.000Z","title":"Makefile介绍"},"prevPost":{"summary":null,"tags":["Redis"],"id":"redis-develop-guideline","title":"Redis开发规范","date":"2014-10-03T00:00:00.000Z"},"nextPost":{"summary":null,"tags":["Redis"],"id":"redis-transaction","title":"redis事务的特点","date":"2014-07-28T00:00:00.000Z"}},"__N_SSG":true}