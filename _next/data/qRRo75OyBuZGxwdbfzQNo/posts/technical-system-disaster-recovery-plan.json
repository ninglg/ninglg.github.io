{"pageProps":{"post":{"summary":null,"tags":["系统设计"],"id":"technical-system-disaster-recovery-plan","contentHtml":"<p>世事无常，为了保护技术系统能免于自然灾难带来的不可用损失，业内衍生出了多种容灾（或灾备，DR）方案。各家公司基本上都按照“同城双活——异地双活——两地三中心”这样的发展模式进行操作。</p>\n<h2>单活（即主备模式，Active-Standby）</h2>\n<p>传统的单活是一主一备，主负责业务处理，备只负责数据同步，备只有在主发生故障时才会启用，并不会承担线上流量。</p>\n<h2>双活（Active-Active）</h2>\n<ol>\n<li>主和备都有业务流量，两者同时对外提供服务，并且可以调节流量分担的比例（可以根据用户ID、地域或者其它业务属性来决定怎么分担流量）。</li>\n<li>要实现业务双活，需要保证包括基础设施(如存储)、中间件(如MQ)、网络层、应用层等都能实现双活。</li>\n<li>双活又分为同城双活（同城双中心）、异地双活。</li>\n</ol>\n<h2>多活</h2>\n<p>因为双活需要同步复制，所以双活的两个中心一般在同一个城市（或附近）进行搭建。如果距离太远，同步复制就会出现比较大的延迟，导致性能下降。</p>\n<h2>备份方式</h2>\n<ol>\n<li>热备：数据实时备份</li>\n<li>冷备：数据周期性定时备份</li>\n</ol>\n<h2>两地三中心</h2>\n<ol>\n<li>两地三中心：是指“同城双中心”加上“异地灾备中心”的一种商用容灾备份解决方案，即在双活的基础上增加了一个异地备份的功能。</li>\n<li>其中“两地”是指同城、异地，“三中心”是指生产中心、同城容灾中心、异地容灾中心。</li>\n<li>同城：在同城或相近区域内（≤ 200km）建立两个数据中心。同城灾难备份一般用于防范火灾、建筑物破坏、供电故障、计算机系统及人为破坏引起的灾难。</li>\n<li>异地：主备中心之间的距离较远（＞ 200km) ， 因此一般采用异步镜像，会有少量的数据丢失。异地灾难备份不仅可以防范火灾、建筑物破坏等可能遇到的风险隐患，还能够防范战争、地震、水灾等风险。</li>\n</ol>\n<h2>网络</h2>\n<ol>\n<li>数据中心的互联网络一般采用光纤。对于大于25km的光纤链路，还需要增加DWDM波分设备，用于提高带宽降低时延。DWDM对于数据传输的时延起着关键的作用。</li>\n<li>双活距离一直都不是问题，主要还是看网络时延和误码率，以及应用对RTT时延要求和容忍度。</li>\n</ol>\n","date":"2015-10-02T10:00:00.000Z","title":"技术系统容灾方案","published":true,"hideInList":false,"feature":null,"isTop":false},"prevPost":{"summary":null,"tags":["系统设计"],"id":"how-to-design-the-tinyurl-system","title":"如何设计一个短网址服务","date":"2015-10-03T10:00:00.000Z","published":true,"hideInList":false,"feature":null,"isTop":false},"nextPost":{"summary":null,"tags":["系统设计","Linux"],"id":"system-monitor-things","title":"关于系统监控的一些事","date":"2015-09-11T10:00:00.000Z","published":true,"hideInList":false,"feature":null,"isTop":false}},"__N_SSG":true}