{"pageProps":{"post":{"summary":null,"tags":["Redis"],"id":"redis-client-list-info","contentHtml":"<h2>查看连接相关的命令</h2>\n<h3>查看clients信息</h3>\n<p>使用 info clients 命令查看clients相关的信息</p>\n<pre><code>\n# Clients\nconnected_clients:1\nclient_recent_max_input_buffer:4\nclient_recent_max_output_buffer:0\nblocked_clients:0\n</code></pre>\n<h3>监测redis连接数是否会持续增长的命令</h3>\n<blockquote>\n<p>watch -n 2 \"redis-cli -h 127.0.0.1 -p 6379 info | grep 'connected_clients'\"</p>\n</blockquote>\n<h3>查看最大连接数限制</h3>\n<p>使用 config get maxclients 命令查看最大连接数限制</p>\n<h3>查看连接的client信息</h3>\n<p>使用 client list 命令查看连接的client信息</p>\n<h3>设置client连接的超时时间</h3>\n<p>使用 CONFIG SET timeout 30 命令设置client的连接idle过期时间，默认为0不过期</p>\n<h2>验证连接的验证脚本</h2>\n<h3>link_redis.php  // 短连接方式</h3>\n<pre><code class=\"language-php\">\n&#x3C;?php  \nset_time_limit (0);\n\n$redis = new redis();  \n$redis->connect('localhost', 6379);\nsleep(30);\n\n</code></pre>\n<h3>max_redis.php</h3>\n<pre><code class=\"language-php\">\n&#x3C;?php\nset_time_limit (0);\n\nfor($i=1;$i&#x3C;=200;$i++){\n\texec(\"nohup php ./link_redis.php > /dev/null &#x26;\");\n}\n\n</code></pre>\n","date":"2010-07-07","title":"Redis的客户端连接数验证"},"prevPost":{"summary":null,"tags":["操作系统"],"id":"virtualization-xen-kvm","title":"虚拟化Xen和KVM的区别","date":"2010-07-09"},"nextPost":{"summary":null,"tags":["PHP","HTTP"],"id":"php-curl-multi-http-request","title":"PHP的curl_multi批量发送http请求","date":"2010-07-05"}},"__N_SSG":true}