{"pageProps":{"post":{"summary":null,"tags":["Redis"],"id":"redis-transaction","contentHtml":"<p>redis事务的特点</p>\n<!-- more -->\n<h1>redis事务</h1>\n<p>redis事务包含了一组命令，这些命令的执行是一次性、顺序性的。</p>\n<h1>和数据库事务的区别</h1>\n<ol>\n<li>redis事务有：开始事务、命令入队、执行事务 三个阶段。</li>\n<li>redis事务没有隔离级别的概念，并不会做内部的预查询。</li>\n<li>redis事务不保证原子性，且没有回滚。</li>\n</ol>\n<h1>redis事务命令</h1>\n<pre><code class=\"language-shell\">watch key1 key2   #监视key1和key2，如果执行过程中被其它命令更改，则事务被打断。即乐观锁机制\nmulti  #指定事务开始\nexec  #指定事务执行，且前面监控锁会被取消\ndiscard  #指定事务取消\nunwatch  #取消对key的监控\n</code></pre>\n<h1>场景</h1>\n<ol>\n<li>discard会将前面的命令都取消。</li>\n<li>事务在exec前，如果某个命令出错（比如命令不存在，而非语法错误），则所有命令都不会执行。</li>\n<li>事务在exec前，如果某个命令有语法性错误（如incr了一个字符串），则其它命令照样执行。</li>\n<li>事务在exec前，如果watch的某个key发生了变化，则事务中的命令都不会执行。</li>\n</ol>\n","date":"2014-07-28T10:00:00.000Z","title":"redis事务的特点","published":true,"hideInList":false,"feature":null,"isTop":false},"prevPost":{"summary":null,"tags":["Linux"],"id":"makefile-intro","title":"Makefile介绍","date":"2014-09-17T10:00:00.000Z","published":true,"hideInList":false,"feature":null,"isTop":false},"nextPost":{"summary":null,"tags":["操作系统"],"id":"mac-usage-skill","title":"Mac使用技巧","date":"2014-05-07T10:00:00.000Z","published":true,"hideInList":false,"feature":null,"isTop":false}},"__N_SSG":true}